<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>我的简历</title>

  <link rel="stylesheet" href="../../scripts/layui/css/layui.css">
  <link rel="stylesheet" href="../../styles/personal/resume.css">
</head>

<body>
  <form class="layui-form layui-form-pane" lay-filter="example" action="">
    <div class="resume-item">
      <div class="title">基本信息</div>
      <div class="layui-form-item">
        <label class="layui-form-label">姓名</label>
        <div class="layui-input-block">
          <input type="text" name="name" required lay-verify="required" placeholder="请输入姓名" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">性别</label>
        <div class="layui-input-block">
          <input type="radio" name="sex" value="男" title="男" checked>
          <input type="radio" name="sex" value="女" title="女">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">出生日期</label>
        <div class="layui-input-block">
          <input type="text" name="birthday" required lay-verify="required" placeholder="请输入出生日期" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">参加工作年份</label>
        <div class="layui-input-block">
          <input type="text" name="worktime" placeholder="请输入参加工作年份" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">手机号</label>
        <div class="layui-input-block">
          <input type="text" name="phone" disabled required lay-verify="required" placeholder="请输入手机号"
            class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">邮箱</label>
        <div class="layui-input-block">
          <input type="text" name="email" placeholder="请输入邮箱" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">居住地</label>
        <div class="layui-input-block">
          <input type="text" name="address" placeholder="请输入居住地" required lay-verify="required" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">毕业院校</label>
        <div class="layui-input-block">
          <input type="text" name="university" placeholder="请输入毕业院校" required lay-verify="required" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">在校荣誉</label>
        <div class="layui-input-block">
          <input type="text" name="rongyu" placeholder="请输入在校荣誉" required lay-verify="required" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">求职状态</label>
        <div class="layui-input-block">
          <select name="status" required lay-verify="required">
            <option value=""></option>
            <option value="学生">学生</option>
            <option value="在职">在职</option>
            <option value="失业">失业</option>
          </select>
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">工作经验</label>
        <div class="layui-input-block">
          <select name="exp" required lay-verify="required">
            <option value=""></option>
            <option value="在校生">在校生</option>
            <option value="应届生">应届生</option>
            <option value="1年以内">1年以内</option>
            <option value="1-3年">1-3年</option>
            <option value="3-5年">3-5年</option>
            <option value="5-10年">5-10年</option>
            <option value="10年以上">10年以上</option>
          </select>
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">学历</label>
        <div class="layui-input-block">
          <select name="edu" required lay-verify="required">
            <option value=""></option>
            <option value="初中及以下">初中及以下</option>
            <option value="高中">高中</option>
            <option value="大专">大专</option>
            <option value="本科">本科</option>
            <option value="硕士">硕士</option>
            <option value="博士">博士</option>
          </select>
        </div>
      </div>
    </div>
    <div class="resume-item">
      <div class="title">求职意向</div>
      <div class="layui-form-item">
        <label class="layui-form-label">期望薪资</label>
        <div class="layui-input-block">
          <select name="money">
            <option value=""></option>
            <option value="3K以下">3K以下</option>
            <option value="3-5K">3-5K</option>
            <option value="5-10K">5-10K</option>
            <option value="10-15K">10-15K</option>
            <option value="15-20K">15-20K</option>
            <option value="20-30K">20-30K</option>
            <option value="30K以上">30K以上</option>
          </select>
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">地点</label>
        <div class="layui-input-block">
          <select name="city">
            <option value=""></option>
            <option value="杭州">杭州</option>
            <option value="上海">上海</option>
            <option value="北京">北京</option>
            <option value="深圳">深圳</option>
            <option value="广州">广州</option>
            <option value="厦门">厦门</option>
          </select>
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">岗位</label>
        <div class="layui-input-block">
          <input type="text" name="job_name" placeholder="请输入岗位" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">行业</label>
        <div class="layui-input-block">
          <select name="job_hy">
            <option value=""></option>
            <option value="互联网">互联网</option>
            <option value="金融">金融</option>
            <option value="房地产">房地产</option>
            <option value="服务业">服务业</option>
            <option value="零售">零售</option>
            <option value="广告">广告</option>
            <option value="物流">物流</option>
          </select>
        </div>
      </div>
    </div>
    <div class="resume-item">
      <div class="title">工作经验</div>
      <div class="layui-form-item layui-form-text">
        <div class="layui-input-block">
          <textarea name="workexp" placeholder="请输入工作经验" class="layui-textarea"></textarea>
        </div>
      </div>
    </div>
    <div class="resume-item">
      <div class="title">项目经验</div>
      <div class="layui-form-item layui-form-text">
        <div class="layui-input-block">
          <textarea name="projexp" placeholder="请输入项目经验" class="layui-textarea"></textarea>
        </div>
      </div>
    </div>
    <div class="resume-item">
      <div class="title">教育经验</div>
      <div class="layui-form-item layui-form-text">
        <div class="layui-input-block">
          <textarea name="studyexp" placeholder="请输入教育经验" class="layui-textarea"></textarea>
        </div>
      </div>
    </div>
    <div class="resume-item">
      <div class="title">在校情况</div>
      <div class="layui-form-item layui-form-text">
        <div class="layui-input-block">
          <textarea name="schoolstatus" placeholder="请输入在校情况" class="layui-textarea"></textarea>
        </div>
      </div>
    </div>
    <div class="resume-item">
      <div class="title">技能特长</div>
      <div class="layui-form-item layui-form-text">
        <div class="layui-input-block">
          <textarea name="skills" placeholder="请输入技能特长" class="layui-textarea"></textarea>
        </div>
      </div>
    </div>
    <div class="resume-item">
      <div class="title">其他</div>
      <div class="layui-form-item layui-form-text">
        <div class="layui-input-block">
          <textarea name="others" placeholder="请输入其他" class="layui-textarea"></textarea>
        </div>
      </div>
    </div>
    <div class="layui-form-item">
      <div class="layui-input-block" style="margin-left: 20px;">
        <button class="layui-btn layui-btn-primary" lay-submit lay-filter="formDemo0">预览</button>
        <button class="layui-btn layui-btn-normal" lay-submit lay-filter="formDemo">保存</button>
      </div>
    </div>
  </form>

  <script src="../../scripts/jquery.v1.7.2.js"></script>
  <script src="../../scripts/layui/layui.js"></script>
  <script>
    layui.use(['layer', 'form'], function () {
      var layer = layui.layer;
      var form = layui.form;

      var user = JSON.parse(localStorage.getItem("user"));
      var user_id = user.id;
      var phone = user.phone;

      //监听提交
      form.on('submit(formDemo)', function (data) {
        $.ajax({
          type: 'POST',
          url: '/api/updateResume',
          dataType: "json",
          contentType: "application/json",
          data: JSON.stringify(Object.assign(data.field, { user_id: user_id, phone: phone })),
          success: function (data) {
            if (data) { layer.msg("保存成功") }
            else layer.msg("保存失败")
          }
        })
        return false;
      });

      form.on('submit(formDemo0)', function (data) {
        $.ajax({
          type: 'POST',
          url: '/api/updateResume',
          dataType: "json",
          contentType: "application/json",
          data: JSON.stringify(Object.assign(data.field, { user_id: user_id, phone: phone })),
          success: function (data) {
            if (data) window.open('./see-resume.html?id=' + user_id);
          }
        })
        return false;
      });

      $.ajax({
        url: '/api/getResumeById',
        data: { id: user_id },
        success: function (data) {
          var obj = { phone: phone };
          if (data !== '') obj = Object.assign(data, { phone: phone });
          form.val('example', obj);
        }
      })

    });
  </script>
</body>

</html>